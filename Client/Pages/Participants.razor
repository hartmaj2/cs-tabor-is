@page "/participants/all"
@inject HttpClient Http
@using Microsoft.AspNetCore.Components.QuickGrid

<PageTitle> Participants </PageTitle>

<h1> Participants </h1>

@if (participants == null)
{
    <p> Loading participants... </p>
}
else
{
    <QuickGrid Items="@participants" class="table">
        <PropertyColumn Property="@(p => p.Id)" Sortable="true" />
        <PropertyColumn Property="@(p => p.FirstName)" Sortable="true" />
        <PropertyColumn Property="@(p => p.LastName)" Sortable="true" />
        <PropertyColumn Property="@(p => p.Age)" Sortable="true" />
        <PropertyColumn Property="@(p => p.PhoneNumber)" Sortable="true" />
        <PropertyColumn Property="@(p => p.BirthNumber)" Sortable="true" />
    </QuickGrid>
}

@code
{
    private IQueryable<Participant>? participants;

    protected override async Task OnInitializedAsync()
    {
        var participantsList = await Http.GetFromJsonAsync<List<Participant>>("api/participants/all");
        participants = participantsList!.AsQueryable();
    }
    
}