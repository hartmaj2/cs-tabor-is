@page "/participants/edit/{participantId:int}"
@inject HttpClient Http

<PageTitle> Edit participant </PageTitle>

@if (participant != null)
{
    <ParticipantForm @bind-ThisParticipant="participant" OnValidSubmitEvent="() => participant = new()"/>
}
else
{
    <p> Loading... </p>
}

@code
{
    [Parameter]
    public int ParticipantId {get ; set; }

    ParticipantFormData? participant;

    protected override async Task OnInitializedAsync()
    {
        Participant? content = await Http.GetFromJsonAsync<Participant>($"/api/participants/{ParticipantId}");
        participant = content!.ConvertToViewParticipant();
        
    }
}